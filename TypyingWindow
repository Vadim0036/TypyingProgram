import java.awt.Color;
import java.awt.Font;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextArea;


public class TypingWindow extends JFrame implements KeyListener
{
	private JFrame mainWindow;
	private JLabel header;
	private JLabel wpm;
	private JLabel accuracy;
	private JButton exit;
	private JButton reset;
	
	private TypingPanel typyingPanel;
	
	private TypingProgram program;
	
	
	public TypingWindow( TypingProgram program )
	{	
		this.program = program;
		
		//Setting up JFrame 
		this.mainWindow = new JFrame();
		this.mainWindow.setLayout(null);
		this.mainWindow.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);	
		this.mainWindow.setSize(600,550);

		//Creating typyingPanel
		this.typyingPanel = new TypingPanel();
		this.typyingPanel.addKeyListener(this);
		
		
		//Setting up the header of the program 
		this.header = new JLabel();
		this.header.setText("Typying Program");
		this.header.setBounds(30,-110, 350,300);;
		this.header.setFont(new Font("Comic Sans MS", Font.PLAIN, 40));
		
		//Setting up word per minute label label
		this.wpm = new JLabel();
		this.wpm.setText("Your speed: " + 0 + " wpm ");
		this.wpm.setFont(new Font("Comic Sans MS", Font.PLAIN, 20));
		this.wpm.setBounds(30, 340, 200, 20); 
		
		//Setting up accuracy label
		this.accuracy = new JLabel();
		this.accuracy.setText("Your accuracy: " + 0 + "% ");
		this.accuracy.setFont(new Font("Comic Sans MS", Font.PLAIN, 20));
		this.accuracy.setBounds(30, 385, 200, 20);
		
		//Setting up exit button
		this.exit = new JButton();
		this.exit.setText("EXIT");
		this.exit.setFont(new Font("Comic Sans MS", Font.PLAIN, 40));
		this.exit.setBounds(30, 425, 200, 50);
		
		
		//Setting up reset button
		this.reset = new JButton();
		this.reset.setText("RESET");
		this.reset.setFont(new Font("Comic Sans MS", Font.PLAIN, 40));
		this.reset.setBounds(355, 425, 200, 50);
					
		//Adding components to frame
		this.mainWindow.add(header);
		this.mainWindow.add(this.wpm);
		this.mainWindow.add(this.accuracy);
		this.mainWindow.add(this.exit);
		this.mainWindow.add(this.reset);
		this.mainWindow.add(this.typyingPanel);
	}
	
	
	public void runProgram()
	{
		this.mainWindow.setVisible(true);
		this.typyingPanel.requestFocus();
	}
	

	public void setText(Text text)
	{
		this.typyingPanel.setText(text);
		this.typyingPanel.repaint();
	}
	
	public void setResult(int speed, int accuracy)
	{
		this.wpm.setText("Your speed: " + speed + " wpm ");
		this.accuracy.setText("Your accuracy: " + accuracy + "% ");
	}
	
	
	@Override
	public void keyTyped(KeyEvent e) {
		
		char c = e.getKeyChar();
		this.program.checkInput( c );
	}

	@Override
	public void keyPressed(KeyEvent e) {
		// TODO Auto-generated method stub
	}

	@Override
	public void keyReleased(KeyEvent e) {
		//TODO
	}
}

