import java.awt.Color;
import java.awt.Font;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextArea;


public class TypingWindow extends JFrame implements KeyListener
{
	private JFrame mainWindow;
	private JLabel header;
	private JLabel wpm;
	private JLabel accuracy;
	private JButton exit;
	private JButton reset;
	
	private TypingPanel typingPanel;
	private TypingProgram program;
	
	
	public TypingWindow( TypingProgram program )
	{	
		this.program = program;
		
		// Setting up JFrame 
		int width = 600;
		int height = 550;
		this.mainWindow = new JFrame();
		this.mainWindow.setLayout(null);
		this.mainWindow.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);	
		this.mainWindow.setSize(width,height);	
		
		//Setting up the header of the program 
		this.header = new JLabel();
		this.header.setText("Typying Program");
		this.header.setBounds(0, 0, width, 100);
		this.header.setHorizontalAlignment( JLabel.L );
		this.header.setFont(new Font("Comic Sans MS", Font.PLAIN, 40));
		
		//Setting up Typing Panel
		this.typingPanel = new TypingPanel();
		this.typingPanel.setBounds(30, 110, 530, 210);
		this.typingPanel.addKeyListener( this );
		
		//Setting up wmp label
		this.wpm = new JLabel();
		setWmpLabel();
		
		//Setting up accuracy label
		this.accuracy = new JLabel();
		setAccuracyLabel();
		
		//Setting up exit button
		this.exit = new JButton();
		this.exit.setText("EXIT");
		this.exit.setFont(new Font("Comic Sans MS", Font.PLAIN, 40));
		this.exit.setBounds(30, 425, 200, 50);
		
		//Setting up reset button
		this.reset = new JButton();
		this.reset.setText("RESET");
		this.reset.setFont(new Font("Comic Sans MS", Font.PLAIN, 40));
		this.reset.setBounds(355, 425, 200, 50);
				
		
		// Adding components to frame
		this.mainWindow.add(header);
		this.mainWindow.add(this.typingPanel);
		this.mainWindow.add(this.wpm);
		this.mainWindow.add(this.accuracy);
		this.mainWindow.add(this.exit);
		this.mainWindow.add(this.reset);
	}
	
	private void setWmpLabel()
	{
		this.wpm.setText("Your speed: " + "TBD");
		this.wpm.setFont(new Font("Comic Sans MS", Font.PLAIN, 20));
		this.wpm.setBounds(30, 340, 250, 20);
	}
	
	private void setAccuracyLabel()
	{
		this.accuracy.setText("Your accuracy: " + "TBD");
		this.accuracy.setFont(new Font("Comic Sans MS", Font.PLAIN, 20));
		this.accuracy.setBounds(30, 385, 250, 20);
	}
	
	public void runProgram()
	{
		this.mainWindow.setVisible(true);
		this.typingPanel.requestFocus();
	}
	
	public void setText( Text text )
	{
		this.typingPanel.setText( text );
	}
	
	
	@Override public void keyTyped(KeyEvent e) {
		//System.out.println( "KEY TYPED" );
		char key = e.getKeyChar();
		this.program.checkInput( key );
		
		System.out.println( "Hello" );
	}

	@Override public void keyPressed(KeyEvent e) {
		//System.out.println( "KEY PRESSED" );
		
	}

	@Override public void keyReleased(KeyEvent e) {
		//System.out.println( "KEY RELEASED" );
	}
}
